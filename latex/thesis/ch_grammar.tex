\chapter{Een grammatica voor logigrammen}
\label{ch:grammatica}

In dit hoofdstuk overlopen we de gebruikte grammaticale categorieën en de grammaticale regels die erbij horen, samen met hun semantiek. We beginnen bij de categorieën die bestaan uit lexicale categorieën en werken naar boven toe richting de categorie van een zin. We gebruiken de DCG-notatie uit hoofdstuk~\ref{sec:DCG}. De feature \texttt{sem} geeft de semantiek van die woordgroep.

\section{Lexicale categorieën}
\subsection{Een mapping naar het lexicon}
\label{sec:lexgram}
De meeste van de grammaticale categorieën die de link vormen met het lexicon volgend de structuur uit grammatica~\ref{dcg:lexcat}. Hierbij staat \textit{cat} voor de categorie in kwestie. De grammaticale regel bestaat uit het opzoeken van een woord in het lexicon (m.b.v. de functie \texttt{lexEntry}). Hierbij kijken we niet alleen naar de lexicale categorie maar ook naar andere features zoals getal; controleren dat het woord uit het lexicon het volgende woord is in de zin (lijn 3); en tenslotte het opzoeken van de betekenis van het woord (m.b.v. de functie \texttt{semLex}). Dit resulteert in de formules van hoofdstuk~\ref{ch:lexicon}.

\begin{dcg}{Een grammaticale regel voor een lexicale categorie \textit{cat}}{dcg:lexcat}
cat([feature1:Feature1, type:Type, sem:Sem]) -->
  { lexEntry(cat, [feature1:Feature1, type:Type, syntax:Word]) },
  Word,
  { semLex(cat, [feature1:Feature1, type:Type, sem:Sem]) }.
\end{dcg}

De categorieën die deze structuur volgen zijn determinatoren (\texttt{det}), hoofdtelwoorden (\texttt{number}), substantieven (\texttt{noun}), voorzetsels (\texttt{prep}), betrekkelijke voornaamwoorden (\texttt{relpro}), hulpwerkwoorden (\texttt{av}), koppelwerkwoorden (\texttt{cop}) en comparatieven (\texttt{comp}).

\paragraph{}Bijvoorbeeld voor een substantief wordt dit grammatica~\ref{dcg:noun}. Het getal van de grammaticale categorie komt overeen met het getal uit het lexicon. Het symbool dat wordt gebruikt in de betekenis van een woord komt ook uit het lexicon.
\begin{dcg}{De grammaticale regel voor een substantief}{dcg:noun}
noun([num:Num, sem:Sem]) -->
  { lexEntry(noun, [symbol:Sym, num:Num, syntax:Word]) },
  Word,
  { semLex(noun, [symbol:Sym, sem:Sem]) }.
\end{dcg}

\subsection{Eigennaam}
Grammatica~\ref{dcg:pn} geeft de grammaticale regel voor een eigennaam weer. Dit lijkt zeer sterk op de algemene mapping van de grammatica naar het lexicon buiten de optionele ``the''. Deze is nodig omdat in sommige puzzels een bepaalde term zowel met als zonder ``the'' voorkomt. Indien we deze twee verschillende termen allebei apart in het lexicon zouden ingeven, zouden deze worden vertaald naar verschillende symbolen. Dit zouden we graag vermijden \footnote{Een alternatief was om de twee vormen met hetzelfde symbool in het lexicon op te nemen. Dat is equivalent aan onderstaande grammatica}.

\begin{dcg}{De grammaticale regel voor een eigennaam}{dcg:pn}
pn([num:Num, sem:Sem]) -->
  { lexEntry(pn, [symbol:Sym, syntax:Word, num:Num]) },
  optional([the]),
  Word,
  { semLex(pn, [symbol:Sym, sem:Sem]) }.
optional(X) -->
  X.
optional(X) -->
  [].
\end{dcg}

\subsection{Transitief werkwoord}
Er zijn twee grammaticale regels voor een transitief werkwoord (grammatica~\ref{dcg:tv}). Enerzijds is er de standaard mapping van grammatica naar lexicon. De voorzetsels en achtervoegsels uit het lexicon worden als feature meegegeven aan de grammaticale woordgroep. Het getal (\texttt{num}) en de vorm (\texttt{inf}) van de grammaticale woordgroep moet ook overeenkomen met die uit het lexicon.

Anderzijds wordt de combinatie koppelwerkwoord + adjectief ook als een transitief werkwoord gezien. Hierbij is het adjectief het achtervoegsel. De semantiek van deze combinatie is die van het koppelwerkwoord ($\sem{cop_{ap}}$) zoals we die hebben afgeleid in hoofdstuk~\ref{sec:lex-koppelwerkwoord}.
\begin{dcg}{De grammaticale regels voor een transitief werkwoord}{dcg:tv}
tv([inf:Inf, num:Num, positions:Pre-Post, sem:Sem]) -->
  { lexEntry(tv, [symbol:Sym, syntax:Word-Pre-Post, inf:Inf, num:Num]) },
  Word,
  { semLex(tv, [symbol:Sym, sem:Sem]) }.

tv([inf:Inf, num:Num, positions:[]-Post, sem:Sem]) -->
  cop([type:ap, inf:Inf, num:Num, sem:Sem, symbol:Sym]),
  { lexEntry(copAdj, [symbol:Sym, adj:Post]) }.
\end{dcg}

\subsection{Onbepaalde woorden}
Het is mogelijk om een onbepaald woord te verzwijgen, bijvoorbeeld ``John finished [sometime] before Mia''. Daarom is er een extra regel die zegt dat het woord niet per se hoeft voor te komen in de zin.

\begin{dcg}{De grammaticale regels voor een onbepaald woord}{dcg:some}
some([sem:Sem]) -->
  { lexEntry(some, [syntax:Word]) },
  Word,
  { semLex(some, [sem:Sem]) }.
some([sem:Sem]) -->
  { semLex(some, [sem:Sem]) }.
\end{dcg}

\subsection{Voegwoord}
Voegwoorden kunnen uit twee delen bestaan: het voegwoord zelf (\texttt{coord}) en een optionele prefix (\texttt{coordPrefix}). De prefix heeft geen vertaling bovenop het voegwoord. Dit zien we ook terug in de eerste grammaticale regel van grammatica~\ref{dcg:coord}. De tweede grammaticale regel stelt ook dat het optioneel is.

De grammaticale regel voor het voegwoord zelf volgt dezelfde structuur als die van sectie~\ref{sec:lexgram}. Een voegwoord kan soms echter weggelaten worden. De grammaticale categorie \texttt{noCoord} stelt een ellips van zo'n voegwoord voor. Er is gekozen voor een aparte categorie omdat een ellips niet overal mag voorkomen.
\begin{dcg}{De grammaticale regels i.v.m. voegwoorden}{dcg:coord}
coordPrefix([type:Type]) -->
  { lexEntry(coordPrefix, [syntax:Word, type:Type]) },
  Word.
coordPrefix([type:_]) -->
  [].

coord([type:Type, sem:Sem]) -->
  { lexEntry(coord, [syntax:Word, type:Type]) },
  Word,
  { semLex(coord, [type:Type, sem:Sem]) }.

noCoord([type:Type, sem:Sem]) -->
  { semLex(coord, [type:Type, sem:Sem]) }.
\end{dcg} 

\section{(Getransformeerde) Substantieven}
Grammatica~\ref{dcg:n} geeft een overzicht van de grammatica regels i.v.m. substantieven en transformaties op die substantieven. De eerste 2 regels zeggen dat een getransformeerd substantief (hiervoor gebruiken we de categorie \texttt{n}) kan bestaan uit een gewoon substantief (\texttt{noun}) al dan niet gevolgd door een transformatie op dat substantief (\texttt{nmod} naar \texttt{noun modifier}). In het geval van een transformatie is de betekenis van het getransformeerde substantief gelijk aan de applicatie van de transformatie op dat van het echte substantief of $\sem{n} = \app{\sem{nmod}}{\sem{noun}}$.

Lijnen 9 t.e.m. 14 van grammatica~\ref{dcg:n} definiëren de mogelijke transformaties: ofwel gaat het om een voorzetselconstituent (\texttt{pp}), ofwel om een betrekkelijke bijzin (\texttt{rc}). In het laatste geval moet het getal van het substantief en het werkwoord uit de bijzin overeenkomen.

\begin{dcg}{De grammaticale regels i.v.m. substantieven}{dcg:n}
n([coord:no, num:Num, sem:Sem]) -->
  noun([num:Num, sem:Noun]),
  { Sem = Noun }.
n([coord:no, num:Num, sem:Sem]) -->
  noun([num:Num, sem:Noun]),
  nmod([num:Num, sem:NMod]),
  { Sem = app(NMod, Noun) }.

nmod([num:_, sem:Sem]) -->
  pp([sem:PP]),
  { Sem = PP }.
nmod([num:Num, sem:Sem]) -->
  rc([num:Num, sem:RC]),
  { Sem = RC }.

pp([sem:Sem]) -->
  prep([sem:Prep]),
  np([coord:_, num:_, gap:[], sem:NP]),
  { Sem = app(Prep, NP) }.

rc([num:Num, sem:Sem]) -->
  relpro([sem:RelPro]),
  vp([coord:no, inf:fin, num:Num, gap:[], sem:VP]),
  { Sem = app(RelPro, VP) }.
\end{dcg}

\paragraph{} Lijnen 16 t.e.m. 19 beschrijven de voorzetselconstituent (\texttt{pp}) zoals ``from France''. Deze constituent bestaat namelijk uit een voorzetsel (\texttt{prep}) gevolgd door een nominale constituent (\texttt{np}). De feature \texttt{gap} van de nominale constituent heeft te maken met ellipsen die kunnen voorkomen in die constituent. De lege lijst wilt zeggen dat er geen ellipsen mogelijk zijn.

De betekenis van een voorzetselconstituent bestaat uit een simpele lambda-applicatie ($\sem{pp} = \app{\sem{prep}}{\sem{np}}$).

\paragraph{} Lijnen 21 t.e.m. 24 beschrijven de betrekkelijke bijzin (\texttt{rc}). Zo'n betrekkelijke bijzin bestaat uit een betrekkelijk voornaamwoord (\texttt{relpro}) gevolgd door een verbale constituent. Een voorbeeld van zo'n betrekkelijke bijzin is ``that loves Mary''. De verbale constituent moet simpel zijn (\texttt{coord:no}). Dat wil zeggen dat er geen voegwoorden mogen in voorkomen. Bovendien moet het werkwoord vervoegd zijn (\texttt{inf:fin}) en dus niet in de infinitief voorkomen. Ten slotte moet het getal overeenkomen met dat van het substantief.

De betekenis bestaat opnieuw uit één lambda-applicatie, namelijk $\sem{rc} = \app{\sem{relpro}}{\sem{vp}}$.

\section{Nominale constituent}

\section{Verbale constituent}
\section{Zin}
